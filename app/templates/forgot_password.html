<!DOCTYPE html>
<html lang="ru" class="auth-page">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>УТОР (Забыл пароль)</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script>
        // Применяем тему сразу, чтобы избежать мерцания
        (function() {
            const savedTheme = localStorage.getItem('theme');
            let theme = savedTheme;
            
            if (!theme) {
                // Определяем системную тему
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    theme = 'dark';
                } else {
                    theme = 'light';
                }
            }
            
            if (theme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            } else {
                document.documentElement.classList.add('light-theme');
            }
        })();
    </script>
</head>
<body class="auth-page">
    <button class="theme-toggle" id="themeToggle" aria-label="Переключить тему">
        <svg class="theme-icon sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="theme-icon moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>
    <div class="auth-container">
        <div class="forgot-password-box">
            <div class="forgot-password-header">
                <svg class="forgot-password-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 11l3 3L22 4"></path>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                </svg>
                <h2 class="forgot-password-title">Забыли пароль?</h2>
                <p class="forgot-password-subtitle">Обратитесь к своему начальнику отдела или напрямую в отдел Администрирования УТОР, контакты представлены ниже</p>
            </div>
            
            <div class="support-contacts-section">
                <h3 class="support-section-title">Контакты отдела Администрирования УТОР</h3>
                <div class="support-contacts-list">
                    <div class="support-contact-item">
                        <div class="support-contact-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                        </div>
                        <div class="support-contact-info">
                            <span class="support-contact-label">Телефон</span>
                            <a href="tel:+78001234567" class="support-contact-value">+7 (800) 123-45-67</a>
                        </div>
                    </div>
                    
                    <div class="support-contact-item">
                        <div class="support-contact-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </div>
                        <div class="support-contact-info">
                            <span class="support-contact-label">Email</span>
                            <a href="mailto:support@utor.example" class="support-contact-value">support@utor.example</a>
                        </div>
                    </div>
                    
                    <div class="support-contact-item">
                        <div class="support-contact-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <div class="support-contact-info">
                            <span class="support-contact-label">Telegram</span>
                            <a href="https://t.me/utor_support" target="_blank" rel="noopener noreferrer" class="support-contact-value">@utor_support</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="forgot-password-footer">
                <a href="{{ url_for('auth.login') }}" class="back-to-login-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    <span>Вернуться к авторизации</span>
                </a>
            </div>
        </div>
    </div>
    
    <script>
        // Переключение темы
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        
        // Определяем системную тему при первой загрузке
        function getSystemTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                return 'dark';
            }
            return 'light';
        }
        
        // Применяем тему
        function applyTheme(theme) {
            if (theme === 'dark') {
                html.classList.add('dark-theme');
                html.classList.remove('light-theme');
                themeToggle.querySelector('.sun-icon').style.display = 'block';
                themeToggle.querySelector('.moon-icon').style.display = 'none';
            } else {
                html.classList.add('light-theme');
                html.classList.remove('dark-theme');
                themeToggle.querySelector('.sun-icon').style.display = 'none';
                themeToggle.querySelector('.moon-icon').style.display = 'block';
            }
            localStorage.setItem('theme', theme);
        }
        
        // Инициализация темы
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                applyTheme(savedTheme);
            } else {
                const systemTheme = getSystemTheme();
                applyTheme(systemTheme);
            }
        }
        
        // Обработчик переключения темы
        themeToggle.addEventListener('click', function() {
            const currentTheme = html.classList.contains('dark-theme') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        });
        
        // Слушаем изменения системной темы (только если тема не сохранена)
        if (window.matchMedia) {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                if (!localStorage.getItem('theme')) {
                    applyTheme(e.matches ? 'dark' : 'light');
                }
            });
        }
        
        // Инициализируем тему при загрузке
        initTheme();
    </script>
</body>
</html>

